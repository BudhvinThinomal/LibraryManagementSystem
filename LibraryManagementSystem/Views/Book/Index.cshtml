@model LibraryManagementSystem.Models.Request.CreateBookRequest

@{
    ViewData["Title"] = "Book Registration";
    var successMessage = TempData["successMessage"]?.ToString();
    var errorMessage = TempData["errorMessage"]?.ToString();
    int currentYear = DateTime.Now.Year;
}

<h3>@ViewData["Title"]?.ToString()</h3>
<hr />

@if (!string.IsNullOrWhiteSpace(successMessage))
{
    <div class="alert alert-success">
        <b>Success : </b>@successMessage
        <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
else if (!string.IsNullOrWhiteSpace(errorMessage))
{
    <div class="alert alert-danger">
        <b>Error : </b>@errorMessage
        <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<form method="post" asp-action="CreateBook" class="mt-3" autocomplete="off">
    <div class="mb-3">
        <label class="form-label">ISBN</label>
        <input type="text" class="form-control" asp-for="ISBN" />
        <span asp-validation-for="ISBN" class="text-danger"></span>
    </div>
    <div class="mb-3">
        <label class="form-label">Title</label>
        <input type="text" class="form-control" asp-for="Title" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>
    <div class="mb-3">
        <label class="form-label">Author</label>
        <input type="text" class="form-control" asp-for="Author" />
        <span asp-validation-for="Author" class="text-danger"></span>
    </div>
    <div class="mb-3">
        <label class="form-label">Publication</label>
        <input type="text" class="form-control" asp-for="Publication" />
        <span asp-validation-for="Publication" class="text-danger"></span>
    </div>    
    <div class="mb-3">
        <label class="form-label">Edition</label>
        <input type="text" class="form-control" asp-for="Edition" />
        <span asp-validation-for="Edition" class="text-danger"></span>
    </div>
    <div class="mb-3">
        <label class="form-label">Published Year</label>
        <input type="number" min="1000" max="@currentYear" value="@currentYear" class="form-control" asp-for="PublishedYear" />
        <span asp-validation-for="PublishedYear" class="text-danger"></span>
    </div>
    <div class="mb-3">
        <label class="form-label">Category</label>
        <select name="Category" class="form-control" asp-for="Category">
            <option value="Fiction">Fiction</option>
            <option value="Nonfiction">Nonfiction</option>
        </select>
    </div>
    <div class="mb-3">
        <label class="form-label">Number of Copies</label>
        <input type="number" class="form-control" asp-for="NumberOfCopies" />
        <span asp-validation-for="NumberOfCopies" class="text-danger"></span>
    </div>
    <div>
        <input type="submit" class="btn btn-primary form-control" />
    </div>
</form>
@section Scripts{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}